{
  "barbarian": {
    "id": "barbarian",
    "name": "Barbare",
    "fr_name": "Barbare",
    "primary_ability": "STR",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "subclass_level": 3,
    "subclasses": [
      "berserker",
      "totem_warrior"
    ],
    "starting_equipment_suggestions": [],
    "features": [
      {
        "id": "rage",
        "name": "Rage",
        "level": 1,
        "type": "active",
        "uses": "2 per long rest, scales with level",
        "description": "Entrez en rage pour obtenir un bonus aux dégâts et une résistance aux dégâts contondants, perforants et tranchants.",
        "effects": {
          "on_activate": {
            "apply_buffs": [
              {
                "buff_id": "rage_resistances",
                "description": "Resistance to bludgeoning, piercing, slashing"
              },
              {
                "buff_id": "rage_damage_bonus",
                "description": "Bonus damage to melee weapon attacks"
              }
            ],
            "state_changes": [
              {
                "forbid": [
                  "cast_spells"
                ],
                "note": "Cannot cast spells while raging"
              }
            ],
            "ui": {
              "show_timer": true,
              "auto_end_on_rest": false
            }
          },
          "on_deactivate": {
            "remove_buffs": [
              "rage_resistances",
              "rage_damage_bonus"
            ],
            "state_changes": [
              {
                "allow": [
                  "cast_spells"
                ]
              }
            ]
          },
          "buff_definitions": {
            "rage_resistances": {
              "type": "resistance_list",
              "resistances": [
                "bludgeoning",
                "piercing",
                "slashing"
              ],
              "duration": {
                "type": "while_active"
              }
            },
            "rage_damage_bonus": {
              "type": "damage_modifier",
              "apply_to": "melee_weapon_attacks",
              "formula_by_level": [
                {
                  "min_level": 1,
                  "formula": "+2"
                },
                {
                  "min_level": 9,
                  "formula": "+3"
                },
                {
                  "min_level": 16,
                  "formula": "+4"
                }
              ],
              "duration": {
                "type": "while_active"
              }
            }
          },
          "engine_hooks": {
            "register": [
              "on_feature_activate_rage",
              "on_feature_deactivate_rage"
            ],
            "notes": "Combat runtime should expose activate/deactivate actions; effects interpreted by engine."
          }
        },
        "fr_name": "Rage"
      },
      {
        "id": "reckless_attack",
        "name": "Attaque téméraire",
        "fr_name": "Attaque téméraire",
        "level": 2,
        "type": "active",
        "description": "Donnez-vous l'avantage aux attaques de mêlée ce tour; les attaques contre vous ont l'avantage jusqu'à votre prochain tour.",
        "effects": {
          "on_use": {
            "apply_buffs": [
              {
                "buff_id": "reckless_self_vuln",
                "description": "Les ennemis ont l'avantage pour vous toucher"
              }
            ],
            "state_changes": [
              {
                "tag_turn_flag": "reckless_attack_active"
              }
            ]
          },
          "on_attack": {
            "conditions": [
              {
                "condition_type": "attacker_has_tag",
                "tag": "reckless_attack_active"
              }
            ],
            "effect": {
              "advantage": true
            }
          },
          "incoming_attack": {
            "conditions": [
              {
                "condition_type": "target_has_buff",
                "buff_id": "reckless_self_vuln"
              }
            ],
            "effect": {
              "attacker_advantage": true
            }
          },
          "buff_definitions": {
            "reckless_self_vuln": {
              "type": "flag",
              "duration": {
                "type": "end_of_next_turn"
              }
            }
          }
        }
      },
      {
        "id": "danger_sense",
        "name": "Sens du danger",
        "fr_name": "Sens du danger",
        "level": 2,
        "type": "passive",
        "description": "Avantage aux sauvegardes de DEX contre les effets que vous voyez.",
        "effects": {
          "save_modifiers": [
            {
              "ability": "DEX",
              "advantage": true,
              "filter": {
                "source_tags": [
                  "trap",
                  "area_effect",
                  "visible"
                ]
              }
            }
          ]
        }
      },
      {
        "id": "brutal_critical",
        "name": "Critique brutal",
        "fr_name": "Critique brutal",
        "level": 9,
        "type": "passive",
        "description": "Ajoutez des dés supplémentaires aux dégâts lors d'un coup critique (évolue aux niveaux 9/13/17).",
        "effects": {
          "on_critical_hit": {
            "extra_damage_dice_by_level": [
              {
                "min_level": 9,
                "dice": "1d6"
              },
              {
                "min_level": 13,
                "dice": "2d6"
              },
              {
                "min_level": 17,
                "dice": "3d6"
              }
            ]
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "fighter": {
    "id": "fighter",
    "name": "Guerrier",
    "fr_name": "Guerrier",
    "primary_ability": "STR or DEX",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "subclass_level": 3,
    "subclasses": [
      "champion",
      "battle_master",
      "eldritch_knight"
    ],
    "starting_equipment_suggestions": [],
    "features": [
      {
        "id": "action_surge",
        "name": "Poussée d'Action",
        "level": 2,
        "type": "resource",
        "uses": "1 per short rest (scales)",
        "description": "Gagnez immédiatement une action supplémentaire ce tour.",
        "effects": {
          "on_use": {
            "grant_temporary_action": {
              "allowed_actions": [
                "Attack",
                "CastSpell",
                "Dodge",
                "Disengage",
                "Dash",
                "UseObject",
                "Special"
              ],
              "count": 1,
              "duration": {
                "type": "immediate"
              }
            },
            "ui": {
              "prompt": "Spend Action Surge to gain an extra action now?"
            }
          },
          "engine_hooks": {
            "register": [
              "on_feature_use_action_surge"
            ],
            "notes": "Runtime must execute granted action in the current turn."
          }
        },
        "fr_name": "Poussée d'Action"
      },
      {
        "id": "extra_attack",
        "name": "Attaque supplémentaire",
        "level": 5,
        "type": "passive",
        "description": "Lorsque vous prenez l'action Attaquer, vous pouvez effectuer des attaques supplémentaires selon votre niveau.",
        "effects": {
          "passive_modifiers": [
            {
              "apply_to": "action:Attack",
              "modifier_type": "extra_attacks",
              "value_by_level": [
                {
                  "min_level": 5,
                  "extra_attacks": 1
                },
                {
                  "min_level": 11,
                  "extra_attacks": 2
                },
                {
                  "min_level": 20,
                  "extra_attacks": 3
                }
              ],
              "notes": "Engine should add extra attack executions when resolving Attack action."
            }
          ],
          "engine_hooks": {
            "register": [
              "on_action_resolve_Attack"
            ],
            "apply_when": "before_executing_attacks"
          }
        },
        "fr_name": "Attaque supplémentaire"
      },
      {
        "id": "second_wind",
        "name": "Second souffle",
        "fr_name": "Second souffle",
        "level": 1,
        "type": "resource",
        "uses": "1 per short rest",
        "description": "Action bonus: regagnez 1d10 + niveau de guerrier PV.",
        "effects": {
          "on_use": {
            "compute_heal": {
              "formula": "1d10 + class_level:fighter"
            },
            "apply_heal": {
              "target": "self",
              "amount_field": "computed"
            }
          },
          "engine_hooks": {
            "register": [
              "on_feature_use_second_wind"
            ]
          }
        }
      },
      {
        "id": "indomitable",
        "name": "Indomptable",
        "fr_name": "Indomptable",
        "level": 9,
        "type": "resource",
        "uses": "1 per long rest (scales)",
        "description": "Relancez un jet de sauvegarde raté.",
        "effects": {
          "on_failed_save": {
            "prompt_choice": {
              "prompt": "Utiliser Indomptable pour relancer ?",
              "choices": [
                "Oui",
                "Non"
              ]
            },
            "if_choice_is": "Oui",
            "reroll": {
              "what": "that_save"
            },
            "consume_resource": {
              "resource_id": "indomitable",
              "amount": 1
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "paladin": {
    "id": "paladin",
    "name": "Paladin",
    "fr_name": "Paladin",
    "primary_ability": "STR or CHA",
    "modules": {
      "MODULE_MAGIE_ACTIF": true,
      "caster_type": "half",
      "spellcasting_ability": "CHA"
    },
    "subclass_level": 3,
    "subclasses": [
      "oath_of_devotion",
      "oath_of_vengeance"
    ],
    "starting_equipment_suggestions": [],
    "features": [
      {
        "id": "divine_smite",
        "name": "Châtiment divin",
        "level": 2,
        "type": "extra",
        "description": "Dépensez un emplacement de sort pour ajouter des dégâts radiants à une attaque d'arme au corps-à-corps réussie.",
        "resource": {
          "type": "spell_slot",
          "consume": true
        },
        "effects": {
          "on_hit": {
            "conditions": [
              {
                "condition_type": "attacker_has_feature",
                "feature_id": "divine_smite"
              },
              {
                "condition_type": "attack_is_melee_weapon"
              }
            ],
            "action_flow": [
              {
                "step": "prompt_choice",
                "payload": {
                  "prompt": "Use Divine Smite? Choose slot level to expend",
                  "choices": "1..available_spell_slot_levels"
                }
              },
              {
                "step": "compute_damage",
                "payload": {
                  "formula": "base + extra_per_slot",
                  "base": {
                    "dice": "1d8"
                  },
                  "extra_per_slot": {
                    "per_slot_level": "1d8",
                    "max_extra_slots": 5
                  }
                }
              },
              {
                "step": "apply_damage",
                "payload": {
                  "damage_field": "computed",
                  "damage_type": "radiant",
                  "apply_to": "target"
                }
              },
              {
                "step": "consume_resource",
                "payload": {
                  "resource_type": "spell_slot",
                  "level": "chosen_slot_level"
                }
              }
            ],
            "ui": {
              "show_roll": true,
              "explain": "Divine Smite will add radiant damage based on spent slot level"
            }
          },
          "engine_hooks": {
            "subscribe_to": [
              "attack_roll_resolved",
              "on_hit_with_weapon"
            ],
            "notes": "If engine supports prompts, do so; otherwise default to auto use when configured."
          }
        },
        "fr_name": "Châtiment divin"
      },
      {
        "id": "lay_on_hands",
        "name": "Imposition des mains",
        "fr_name": "Imposition des mains",
        "level": 1,
        "type": "resource",
        "uses": "pool=5×niveau",
        "description": "Soignez des PV en dépensant des points de votre réserve (5×niveau).",
        "effects": {
          "resource_pool": {
            "id": "lay_on_hands_pool",
            "calc": "5 * class_level:paladin",
            "refresh": "long_rest"
          },
          "on_use": {
            "prompt_number": {
              "prompt": "Combien de points dépenser ?",
              "min": 1,
              "max_from_resource": "lay_on_hands_pool"
            },
            "apply_heal": {
              "target": "ally_or_self",
              "amount_field": "prompt_number"
            },
            "consume_resource": {
              "resource_id": "lay_on_hands_pool",
              "amount_from": "prompt_number"
            }
          }
        }
      },
      {
        "id": "aura_of_protection",
        "name": "Aura de protection",
        "fr_name": "Aura de protection",
        "level": 6,
        "type": "passive",
        "description": "Alliés à 10 ft reçoivent +mod CHA aux jets de sauvegarde.",
        "effects": {
          "aura": {
            "radius_ft": 10,
            "apply": {
              "save_bonus": {
                "all": {
                  "add_mod_from_ability": "CHA"
                }
              }
            },
            "affects": "self_and_allies"
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "rogue": {
    "id": "rogue",
    "name": "Voleur",
    "fr_name": "Voleur",
    "primary_ability": "DEX",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "subclass_level": 3,
    "subclasses": [
      "thief",
      "assassin",
      "arcane_trickster"
    ],
    "starting_equipment_suggestions": [],
    "features": [
      {
        "id": "sneak_attack",
        "name": "Attaque sournoise",
        "level": 1,
        "type": "passive",
        "description": "Ajoutez des dés de dégâts si vous avez l'avantage sur l'attaque ou si un allié est à 1,50 m (5 ft) de la cible.",
        "effects": {
          "on_hit": {
            "conditions": [
              {
                "condition_type": "weapon_has_finesse_or_ranged"
              },
              {
                "condition_type": "attacker_has_advantage",
                "any_of": true
              },
              {
                "condition_type": "ally_within_5ft_of_target",
                "any_of": true
              },
              {
                "condition_type": "special_case_flanking",
                "any_of": true
              }
            ],
            "effect": {
              "damage": {
                "scaling_by_level": [
                  {
                    "min_level": 1,
                    "dice": "1d6"
                  },
                  {
                    "min_level": 5,
                    "dice": "2d6"
                  },
                  {
                    "min_level": 11,
                    "dice": "3d6"
                  },
                  {
                    "min_level": 17,
                    "dice": "4d6"
                  }
                ],
                "type": "piercing"
              },
              "application": "add_to_attack_damage"
            },
            "ui": {
              "show_roll": true,
              "note": "Sneak Attack adds extra dice to damage when conditions met."
            }
          },
          "engine_hooks": {
            "subscribe_to": [
              "attack_roll_resolved"
            ],
            "apply_when": "after_hit_confirmed"
          }
        },
        "fr_name": "Attaque sournoise"
      },
      {
        "id": "cunning_action",
        "name": "Ruse",
        "fr_name": "Ruse",
        "level": 2,
        "type": "active",
        "description": "Action bonus: Dash/Disengage/Hide.",
        "effects": {
          "on_use": {
            "grant_bonus_action_options": [
              "Dash",
              "Disengage",
              "Hide"
            ]
          }
        }
      },
      {
        "id": "uncanny_dodge",
        "name": "Esquive instinctive",
        "fr_name": "Esquive instinctive",
        "level": 5,
        "type": "reaction",
        "description": "Réaction: réduisez de moitié les dégâts d'une attaque qui vous touche.",
        "effects": {
          "incoming_hit": {
            "prompt": "Utiliser Esquive instinctive ?",
            "if_confirmed": {
              "modify_damage_taken": {
                "multiplier": 0.5
              }
            }
          }
        }
      },
      {
        "id": "reliable_talent",
        "name": "Talent fiable",
        "fr_name": "Talent fiable",
        "level": 11,
        "type": "passive",
        "description": "Traitement des jets de compétence maîtrisés: le 1d20 est considéré comme au moins 10.",
        "effects": {
          "skill_checks": {
            "proficient_only": true,
            "floor_d20": 10
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "druid": {
    "id": "druid",
    "name": "Druide",
    "fr_name": "Druide",
    "primary_ability": "WIS",
    "modules": {
      "MODULE_MAGIE_ACTIF": true,
      "caster_type": "full",
      "spellcasting_ability": "WIS"
    },
    "subclass_level": 2,
    "subclasses": [
      "circle_of_the_land",
      "circle_of_the_moon"
    ],
    "starting_equipment_suggestions": [],
    "features": [
      {
        "id": "wild_shape",
        "name": "Forme sauvage",
        "level": 2,
        "type": "resource",
        "uses": "2 uses initially, increases with level",
        "description": "Transformez-vous en bête admissible selon votre niveau de druide, pour une durée limitée.",
        "effects": {
          "on_use": {
            "prompt_choice": {
              "prompt": "Choose valid beast form (CR and options filtered by level)",
              "filter_by": {
                "max_cr_by_level": {
                  "1": 0.25,
                  "2": 0.5,
                  "4": 1,
                  "8": 2
                }
              }
            },
            "apply_transformation": {
              "replace_stats": [
                "size",
                "speed",
                "armor_class",
                "hit_points_temp",
                "abilities",
                "senses"
              ],
              "retain": [
                "alignment",
                "skills_proficiencies",
                "language_knowledge?"
              ],
              "duration_formula": {
                "type": "minutes",
                "by_level": [
                  {
                    "min_level": 2,
                    "minutes": 30
                  },
                  {
                    "min_level": 8,
                    "minutes": 60
                  }
                ]
              },
              "restrictions": {
                "cannot_cast_spells": true,
                "cannot_use_material_components": true
              }
            },
            "ui": {
              "show_transformation_preview": true
            }
          },
          "on_revert": {
            "restore_stats": true,
            "carry_over_hp_loss_into_hit_points": false
          },
          "engine_hooks": {
            "register": [
              "on_feature_use_wild_shape"
            ],
            "notes": "Engine needs to manage temporary actor state."
          }
        },
        "fr_name": "Forme sauvage"
      },
      {
        "id": "beast_spells",
        "name": "Sorts de bête",
        "fr_name": "Sorts de bête",
        "level": 18,
        "type": "passive",
        "description": "Lancer certains sorts sans composantes somatiques/matérielles en Forme sauvage.",
        "effects": {
          "casting_modifiers": {
            "while_transformed": {
              "ignore_components": [
                "somatic",
                "material_non_costly"
              ]
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "bard": {
    "id": "bard",
    "name": "Barde",
    "fr_name": "Barde",
    "primary_ability": "CHA",
    "modules": {
      "MODULE_MAGIE_ACTIF": true,
      "caster_type": "full",
      "spellcasting_ability": "CHA"
    },
    "subclass_level": 3,
    "subclasses": [
      "college_of_lore"
    ],
    "features": [
      {
        "id": "bardic_inspiration",
        "name": "Inspiration bardique",
        "fr_name": "Inspiration bardique",
        "level": 1,
        "type": "resource",
        "uses": "CHA mod per long rest",
        "description": "Bonus utilisable par un allié: ajoutez 1 dé à un jet (attaque, compétence, sauvegarde). Dé évolue avec le niveau.",
        "effects": {
          "resource_pool": {
            "id": "bardic_inspiration_pool",
            "calc": "max(1, ability_mod:CHA)",
            "refresh": "long_rest"
          },
          "on_use": {
            "target": "ally",
            "grant_buff": {
              "buff_id": "has_inspiration_die"
            },
            "consume_resource": {
              "resource_id": "bardic_inspiration_pool",
              "amount": 1
            }
          },
          "buff_definitions": {
            "has_inspiration_die": {
              "type": "one_shot_bonus_die",
              "die_by_level": [
                {
                  "min_level": 1,
                  "die": "d6"
                },
                {
                  "min_level": 5,
                  "die": "d8"
                },
                {
                  "min_level": 10,
                  "die": "d10"
                },
                {
                  "min_level": 15,
                  "die": "d12"
                }
              ],
              "apply_to": [
                "attack_roll",
                "ability_check",
                "saving_throw"
              ],
              "duration": {
                "type": "minutes",
                "value": 10
              }
            }
          }
        }
      },
      {
        "id": "song_of_rest",
        "name": "Chant de repos",
        "fr_name": "Chant de repos",
        "level": 2,
        "type": "passive",
        "description": "Pendant un repos court, les alliés regagnent des PV supplémentaires.",
        "effects": {
          "short_rest": {
            "extra_heal_die_by_level": [
              {
                "min_level": 2,
                "dice": "1d6"
              },
              {
                "min_level": 9,
                "dice": "1d8"
              },
              {
                "min_level": 13,
                "dice": "1d10"
              },
              {
                "min_level": 17,
                "dice": "1d12"
              }
            ]
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "cleric": {
    "id": "cleric",
    "name": "Clerc",
    "fr_name": "Clerc",
    "primary_ability": "WIS",
    "modules": {
      "MODULE_MAGIE_ACTIF": true,
      "caster_type": "full",
      "spellcasting_ability": "WIS"
    },
    "subclass_level": 1,
    "subclasses": [
      "life_domain"
    ],
    "features": [
      {
        "id": "channel_divinity",
        "name": "Canalisation d'Énergie divine",
        "fr_name": "Canalisation d'Énergie divine",
        "level": 2,
        "type": "resource",
        "uses": "1 per short rest (scales)",
        "description": "Utilisez votre énergie divine pour des effets (dont Repousser les morts-vivants).",
        "effects": {
          "resource_pool": {
            "id": "channel_divinity",
            "calc": "1 + floor((class_level:cleric>=6) ? 1 : 0)",
            "refresh": "short_rest"
          }
        }
      },
      {
        "id": "turn_undead",
        "name": "Repousser les morts-vivants",
        "fr_name": "Repousser les morts-vivants",
        "level": 2,
        "type": "action",
        "description": "Les morts-vivants proches doivent réussir un jet de sauvegarde de Sagesse ou être repoussés.",
        "effects": {
          "on_use": {
            "area": {
              "shape": "sphere",
              "radius_ft": 30,
              "affects": "enemies",
              "filter": {
                "type": "undead"
              }
            },
            "force_save": {
              "ability": "WIS",
              "dc_from": "spell_save_dc:cleric"
            },
            "on_fail": {
              "apply_condition": {
                "id": "turned",
                "duration": {
                  "type": "rounds",
                  "value": 1
                }
              }
            },
            "consume_resource": {
              "resource_id": "channel_divinity",
              "amount": 1
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "fighter_stub": {
    "id": "fighter_stub",
    "name": "Guerrier (exemple)",
    "fr_name": "Guerrier (exemple)",
    "primary_ability": "STR or DEX",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "features": [],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "monk": {
    "id": "monk",
    "name": "Moine",
    "fr_name": "Moine",
    "primary_ability": "DEX or WIS",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "subclass_level": 3,
    "features": [
      {
        "id": "ki",
        "name": "Ki",
        "fr_name": "Ki",
        "level": 2,
        "type": "resource",
        "description": "Réservoir de ki: dépensez pour activer des techniques (repos court/long pour récupérer).",
        "effects": {
          "resource_pool": {
            "id": "ki_points",
            "calc": "class_level:monk",
            "refresh": "short_rest"
          }
        }
      },
      {
        "id": "stunning_strike",
        "name": "Frappe étourdissante",
        "fr_name": "Frappe étourdissante",
        "level": 5,
        "type": "reaction",
        "description": "Quand vous touchez avec une attaque de mêlée, dépensez 1 ki pour forcer une sauvegarde de CON ou étourdir.",
        "effects": {
          "on_hit": {
            "conditions": [
              {
                "condition_type": "attack_is_melee_weapon"
              }
            ],
            "prompt": "Dépenser 1 point de ki pour Frappe étourdissante ?",
            "if_confirmed": {
              "force_save_on_target": {
                "ability": "CON",
                "dc_from": "ki_dc:monk"
              },
              "on_fail": {
                "apply_condition": {
                  "id": "stunned",
                  "duration": {
                    "type": "end_of_next_turn"
                  }
                }
              },
              "consume_resource": {
                "resource_id": "ki_points",
                "amount": 1
              }
            }
          }
        }
      },
      {
        "id": "deflect_missiles",
        "name": "Déviation des projectiles",
        "fr_name": "Déviation des projectiles",
        "level": 3,
        "type": "reaction",
        "description": "Réaction: réduisez les dégâts des attaques à distance de 1d10 + DEX + niveau de moine.",
        "effects": {
          "incoming_ranged_hit": {
            "compute": {
              "field": "reduction",
              "formula": "1d10 + ability_mod:DEX + class_level:monk"
            },
            "modify_damage_taken": {
              "subtract_field": "reduction",
              "minimum": 0
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "ranger": {
    "id": "ranger",
    "name": "Rôdeur",
    "fr_name": "Rôdeur",
    "primary_ability": "DEX or WIS",
    "modules": {
      "MODULE_MAGIE_ACTIF": true,
      "caster_type": "half",
      "spellcasting_ability": "WIS"
    },
    "features": [
      {
        "id": "favored_foe",
        "name": "Ennemi favori (marque)",
        "fr_name": "Ennemi favori (marque)",
        "level": 1,
        "type": "active",
        "description": "Marquez une cible: ajoutez des dégâts une fois par tour quand vous la touchez.",
        "effects": {
          "on_use": {
            "apply_buffs": [
              {
                "buff_id": "favored_mark"
              }
            ]
          },
          "on_hit": {
            "conditions": [
              {
                "condition_type": "target_has_buff",
                "buff_id": "favored_mark"
              },
              {
                "condition_type": "once_per_turn"
              }
            ],
            "effect": {
              "damage": {
                "scaling_by_level": [
                  {
                    "min_level": 1,
                    "dice": "1d4"
                  },
                  {
                    "min_level": 6,
                    "dice": "1d6"
                  },
                  {
                    "min_level": 14,
                    "dice": "1d8"
                  }
                ],
                "type": "weapon"
              },
              "application": "add_to_attack_damage"
            }
          },
          "buff_definitions": {
            "favored_mark": {
              "type": "mark",
              "duration": {
                "type": "minutes",
                "value": 10
              }
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "rogue_stub": {
    "id": "rogue_stub",
    "name": "Voleur (exemple)",
    "fr_name": "Voleur (exemple)",
    "primary_ability": "DEX",
    "modules": {
      "MODULE_MAGIE_ACTIF": false
    },
    "features": [],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "sorcerer": {
    "id": "sorcerer",
    "name": "Ensorceleur",
    "fr_name": "Ensorceleur",
    "primary_ability": "CHA",
    "modules": {
      "MODULE_MAGIE_ACTIF": true
    },
    "features": [
      {
        "id": "font_of_magic",
        "name": "Source de magie",
        "fr_name": "Source de magie",
        "level": 2,
        "type": "resource",
        "description": "Points de sorcellerie = niveau d'ensorceleur. Repos long.",
        "effects": {
          "resource_pool": {
            "id": "sorcery_points",
            "calc": "class_level:sorcerer",
            "refresh": "long_rest"
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "warlock": {
    "id": "warlock",
    "name": "Sorcier",
    "fr_name": "Sorcier",
    "primary_ability": "CHA",
    "modules": {
      "MODULE_MAGIE_ACTIF": true
    },
    "features": [
      {
        "id": "eldritch_invocations",
        "name": "Invocations occultes",
        "fr_name": "Invocations occultes",
        "level": 2,
        "type": "choice",
        "description": "Choisissez des invocations conférant des capacités permanentes.",
        "effects": {
          "choices": {
            "category": "invocations",
            "count_by_level": [
              {
                "min_level": 2,
                "count": 2
              },
              {
                "min_level": 5,
                "count": 3
              },
              {
                "min_level": 7,
                "count": 4
              },
              {
                "min_level": 9,
                "count": 5
              },
              {
                "min_level": 12,
                "count": 6
              },
              {
                "min_level": 15,
                "count": 7
              },
              {
                "min_level": 18,
                "count": 8
              }
            ]
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "wizard": {
    "id": "wizard",
    "name": "Magicien",
    "fr_name": "Magicien",
    "primary_ability": "INT",
    "modules": {
      "MODULE_MAGIE_ACTIF": true
    },
    "features": [
      {
        "id": "arcane_recovery",
        "name": "Récupération arcanique",
        "fr_name": "Récupération arcanique",
        "level": 1,
        "type": "resource",
        "description": "Une fois par jour, récupérez des emplacements de sorts dont le total de niveaux ≤ la moitié de votre niveau de magicien (arrondi au supérieur).",
        "effects": {
          "on_use": {
            "limit": "once_per_day",
            "restore_spell_slots": {
              "total_levels_max": "ceil(class_level:wizard/2)",
              "level_cap": 5
            }
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  },
  "artificer": {
    "id": "artificer",
    "name": "Artificier",
    "fr_name": "Artificier",
    "primary_ability": "INT",
    "modules": {
      "MODULE_MAGIE_ACTIF": true
    },
    "features": [
      {
        "id": "infuse_items",
        "name": "Infusions",
        "fr_name": "Infusions",
        "level": 2,
        "type": "choice",
        "description": "Apprenez des infusions et ayez un nombre d'objets infusés actifs limité qui augmente avec le niveau.",
        "effects": {
          "choices": {
            "category": "infusions",
            "known_by_level": [
              {
                "min_level": 2,
                "known": 4
              },
              {
                "min_level": 6,
                "known": 6
              },
              {
                "min_level": 10,
                "known": 8
              },
              {
                "min_level": 14,
                "known": 10
              }
            ],
            "active_limit_by_level": [
              {
                "min_level": 2,
                "active": 2
              },
              {
                "min_level": 6,
                "active": 3
              },
              {
                "min_level": 10,
                "active": 4
              },
              {
                "min_level": 14,
                "active": 5
              }
            ]
          }
        }
      }
    ],
    "created_at": "2025-09-10T08:40:03.849493Z"
  }
}
